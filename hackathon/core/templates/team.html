
{% extends 'base.html' %}
{% load static %}


{% block content %}
    <script>
            function EnviaConvites(user_id){
            $.post("{% url 'invitation_team' %}",
            {
                user_id: user_id,
                team: {{ team.id }}
            });
        }
    $(document).ready(function(){
        $("#busca").change(function(){
            var username = $(this).val();
              $.ajax({
                url: '{% url "invitation_team" %}',
                data: {
                  'search': username
                },
                dataType: 'json',
                success: function (data) {
                    var jsonData = JSON.parse(JSON.stringify(data));
                    var i, peopleHTML= '';
                    for (i = 0; i < data.length; i++) {
                    peopleHTML +=
                        "                                                        <div class=\"wrapper d-flex align-items-center py-2 border-bottom\">\n" +
                        "                                                            <img class=\"img-sm rounded-circle\" src=\"{% static 'images/logoSmall.png' %}\" alt=\"profile\">\n" +
                        "                                                            <div class=\"wrapper ml-3\">\n" +
                        "                                                                <h6 class=\"mb-1\">" + jsonData[i]['fields']['username'] + "</h6>\n" +
                        "                                                                <small class=\"text-muted mb-0\"><i class=\"fas fa-map-marker-alt mr-1\"></i>Florida, USA\n" +
                        "                                                                </small>\n" +
                        "                                                            </div>\n" +
                        "                                                            <input type=\"hidden\" name=\"id_team\"  value="+ {{ team.id }} +">\n" +
                        "                                                            <input type=\"hidden\" name=\"user_id\"  value=" + jsonData[i]['pk'] + ">\n" +
                        "                                                            <input class=\"btn btn-primary btn-fw\" type=\"submit\" value=\"Convidar\" onclick=\"EnviaConvites("+ jsonData[i]['pk'] +") \" >\n" +
                        "                                                        </div>\n";
                    }
                    var teste = document.getElementById('people')
                    teste.innerHTML = (peopleHTML);
                }
              });
        });
    });
    </script>
    <!--peopleHTML += "<td>" + jsonData[i]['pk'] + "</td>";
        peopleHTML += "<td>" + jsonData[i]['fields']['username'] + "</td>";
        peopleHTML += "</tr>";
        $("#people tbody").html(peopleHTML);
                                        "<div class=\"wrapper d-flex align-items-center py-2 border-bottom\">\n" +
                                    "<form method=\"post\" action=\" {% url 'invitation_team' %} \">"+
"                                            <img class=\"img-sm rounded-circle\" src=\"{% static 'images/logoSmall.png' %}\" alt=\"profile\">\n" +
"                                            <div class=\"wrapper ml-3\">\n" +
"                                                <h6 id=\"username\" name=\\\"username\\\"\\n\" class=\"mb-1\">" + jsonData[i]['fields']['username'] +"</h6>\n" +
"                                                <small class=\"text-muted mb-0\"><i class=\"fas fa-map-marker-alt mr-1\"></i>New York City, USA\n" + "</small>\n" +
"                                            </div>\n" +
                                            "<input type=\"hidden\" name=\"team_id\"\n" + "value=\"  + {{ team.id }} + \">" +
                                            "<input type=\"hidden\" name=\"user_id\"\n" + "value=\""  + jsonData[i]['pk'] + " \">" +
                                            "<input class=\"btn btn-primary btn-fw\" type=\"submit\"" +  "value=\"  Convidar \">" +
                                     "</form>" +
"                                    </div>";-->

    <div class="row">
        <div class="col-md-9 grid-margin stretch-card">
            <div class="card text-center">
                <div class="card-body">
                    <img src="{% static 'images/logoSmall.png' %}" class="img-lg rounded-circle mb-2" alt="profile image"/>
                    <h4>{{ team }}</h4>
                    {% if level_asses == 'Admin' %}
                        <div class=" ml-auto px-1 py-1">
                                <form>
                                    {% csrf_token %}
                                    <input type="hidden" value="{{ team.id }}" name="id_team">
                                    <button type="button" class="btn btn-dark btn-icon-text" data-toggle="modal" data-target="#EditarEquipe">
                                        Editar
                                        <i class="fas fa-pencil-alt btn-icon-append"></i>
                                    </button>
                                </form>
                        </div>
                        <div class=" ml-auto px-1 py-1">
                                <form methods="post" action="{% url 'delete_team' %}">
                                    {% csrf_token %}
                                    <input type="hidden" value="{{ team.id }}" name="id_team">

                                    <button type="submit" class="btn btn-danger btn-icon-text">
                                        Deletar
                                        <i class="fa fa-eraser btn-icon-prepend"></i>
                                    </button>
                                </form>
                        </div>
                    {% endif %}
{#                    <p class="text-muted">{{ member }}</p>#}
{#                    <p class="text-muted">#}
{#                        {{ User }} " + self.id_user.username + " Ã© " + self.level_asses + " do team " + self.id_team.name#}
{#                    </p>#}
{#                    <p class="mt-4 card-text">#}
{#                        Lorem ipsum dolor sit amet, consectetuer adipiscing elit.#}
{#                        Aenean commodo ligula eget dolor. Lorem#}
{#                    </p>#}
{#                    <button class="btn btn-info btn-sm mt-3 mb-4">Follow</button>#}
                    <div class="border-top pt-3" style="margin-top: 20px">
                       <!-- <div class="row">
                            <div class="col-4">
                                <h6>5896</h6>
                                <p>Post</p>
                            </div>
                            <div class="col-4">
                                <h6>1596</h6>
                                <p>Followers</p>
                            </div>
                            <div class="col-4">
                                <h6>7896</h6>
                                <p>Likes</p>
                            </div>
                        </div> -->
                        <h4>Integrantes do Time</h4>
                        <div class="row">
                            <div class="col-md-4 grid-margin stretch-card">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex flex-row">
                                            <img src="{% static 'images/logoSmall.png' %}" class="img-lg rounded"
                                                 alt="profile image"/>
                                            <div class="ml-3">
                                                <h6>Maria</h6>
                                                <p class="text-muted">maria@gmail.com</p>
                                                <p class="mt-2 text-primary font-weight-bold">Designer</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 grid-margin stretch-card">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex flex-row">
                                            <img src="{% static 'images/logoSmall.png' %}" class="img-lg rounded"
                                                 alt="profile image"/>
                                            <div class="ml-3">
                                                <h6>Thomas Edison</h6>
                                                <p class="text-muted">thomas@gmail.com</p>
                                                <p class="mt-2 text-primary font-weight-bold">Developer</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 grid-margin stretch-card">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex flex-row">
                                            <img src="{% static 'images/logoSmall.png' %}" class="img-lg rounded"
                                                 alt="profile image"/>
                                            <div class="ml-3">
                                                <h6>Edward</h6>
                                                <p class="text-muted">edward@gmail.com</p>
                                                <p class="mt-2 text-primary font-weight-bold">Tester</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Enviar Convites-->
                            <div class="col-md-12 grid-margin grid-margin-md-0 stretch-card">
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title">Enviar Convites</h4>
                                        <div class="nav-link">
                                               {% csrf_token %}
                                              <div class="input-group">
                                                <!-- Buscar -->

                                                    <div class="input-group-prepend">
                                                      <span class="input-group-text">
                                                          <i class="fas fa-search"></i>
                                                      </span>
                                                    </div>
                                                    <input type="text" class="form-control" placeholder="Nome ou email" id="busca"  >
                                                   <!-- <div class="input-group-prepend">
                                                      <input class="btn btn-secondary btn-fw" type="submit" value="Pesquisar">
                                                    </div> -->
                                              </div>
                                            <p id="people">

                                             </p>
                                        </div>




                                         <!--
                                        <div class="wrapper d-flex align-items-center py-2 border-bottom">
                                            <img class="img-sm rounded-circle" src="{% static 'images/logoSmall.png' %}" alt="profile">
                                            <div class="wrapper ml-3">
                                                <h6 class="mb-1">Daniel Russel</h6>
                                                <small class="text-muted mb-0"><i class="fas fa-map-marker-alt mr-1"></i>Florida, USA
                                                </small>
                                            </div>
                                            <div class="badge badge-pill badge-success ml-auto px-1 py-1"><i
                                                    class="fas fa-plus font-weight-bold"></i></div>
                                        </div>-->

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Atividade do time</h4>
                    <ul class="solid-bullet-list">
                        <li>
                            <h6>User confirmation</h6>
                            <p>Lorem Ipsum is simply dummy text of the printing </p>
                            <p class="text-muted">
                                <i class="far fa-clock"></i>
                                7 months ago.
                            </p>
                        </li>
                        <li>
                            <h6>Continuous evaluation</h6>
                            <p>Lorem Ipsum is simply dummy text of the printing </p>
                            <p class="text-muted">
                                <i class="far fa-clock"></i>
                                7 months ago.
                            </p>
                        </li>
                        <li>
                            <h6>Promotion</h6>
                            <p>Lorem Ipsum is simply dummy text of the printing </p>
                            <p class="text-muted">
                                <i class="far fa-clock"></i>
                                7 months ago.
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
                <div class="col-md-6 grid-margin">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title mb-0">Statistics</h4>
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="d-inline-block pt-3">
                                    <div class="d-md-flex">
                                        <h2 class="mb-0">$10,200</h2>
                                        <div class="d-flex align-items-center ml-md-2 mt-2 mt-md-0">
                                            <i class="far fa-clock text-muted"></i>
                                            <small class=" ml-1 mb-0">Updated: 9:10am</small>
                                        </div>
                                    </div>
                                    <small class="text-gray">Raised from 89 orders.</small>
                                </div>
                                <div class="d-inline-block">
                                    <i class="fas fa-chart-pie text-info icon-lg"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 grid-margin">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title mb-0">Daily Order</h4>
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="d-inline-block pt-3">
                                    <div class="d-md-flex">
                                        <h2 class="mb-0">$2256</h2>
                                        <div class="d-flex align-items-center ml-md-2 mt-2 mt-md-0">
                                            <i class="far fa-clock text-muted"></i>
                                            <small class="ml-1 mb-0">Updated: 05:42pm</small>
                                        </div>
                                    </div>
                                    <small class="text-gray">hey, letâs have lunch together</small>
                                </div>
                                <div class="d-inline-block">
                                    <i class="fas fa-shopping-cart text-danger icon-lg"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--modal editar-->
            <div class="modal fade" id="EditarEquipe" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                    <div class="modal-header">
                      <h4 class="card-title">Edite sua Equipe</h4>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                      <form id="example-form" method="post" action="{% url 'update_team' %}">
                        <div class="modal-body">
                            {% csrf_token %}
                            <div>
                              <section>
                                <div class="form-group">
                                  <label>Nome</label>
                                  <input class="form-control" name="name" id="name"  placeholder="Nome da Equipe" value="{{ team.name }}">
                                  <small class="form-text text-muted">Ex: SÃ³ Beck end, Terror do NetBeans, HeadShot, Tic-e-taca, C mexe comigo..</small>
                                </div>
                                <div class="form-group">
                                  <label>DescriÃ§Ã£o</label>
                                  <input class="form-control" name="description" id="description"  placeholder="DescriÃ§Ã£o da Equipe"  value="{{ team.description }}">
                                  <small class="form-text text-muted">Ex: SÃ³ tem fera aqui bixo..</small>
                                </div>
                                <input type="hidden" name="id_team" value="{{ team.id }}">
                              </section>
                            </div>
                        </div>
                        <div class="modal-footer">
                          <input class="btn btn-primary btn-fw" type="submit" value="Editar">
                          <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                    </div>
                </div>
            </div>



{% endblock %}


{#{% if user.is_authenticated %}#}